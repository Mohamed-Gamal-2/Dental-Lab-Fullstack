<form [formGroup]="staffForm" (ngSubmit)="handleAddStaff()">
  <div class="pb-10 mt-3 staff-form">
    <h2 class="text-2xl font-medium leading-7 text-gray-900">
      Add Staff Info.
    </h2>
    <p
      class="mt-1 text-sm leading-6 text-gray-600"
      [ngStyle]="{ color: failMsg != '' ? 'red' : 'green' }"
    >
      <span *ngIf="successMsg != ''">{{ successMsg }}</span>
      <span *ngIf="failMsg != ''">{{ failMsg }}</span>
    </p>

    <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
      <div class="lg:col-span-3 sm:col-span-6">
        <label
          for="ssn"
          class="block text-sm font-medium leading-6 text-gray-900"
          >SSN</label
        >
        <div class="mt-2">
          <input
            type="text"
            name="ssn"
            id="ssn"
            formControlName="ssn"
            autocomplete="ssn"
            class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
          />
        </div>
        <div
          *ngIf="staffForm.get('ssn')?.errors && staffForm.get('ssn')?.touched"
        >
          <p
            *ngIf="staffForm.get('ssn')?.getError('required')"
            class="mt-1 text-red-700"
          >
            ssn is required
          </p>
          <p
            *ngIf="staffForm.get('ssn')?.getError('pattern')"
            class="mt-1 text-red-700"
          >
            ssn must be 14 numbers
          </p>
        </div>
      </div>

      <div class="lg:col-span-3 sm:col-span-6">
        <label
          for="name"
          class="block text-sm font-medium leading-6 text-gray-900"
          >Name</label
        >
        <div class="mt-2">
          <input
            type="text"
            name="name"
            id="name"
            autocomplete="name"
            formControlName="name"
            class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
          />
        </div>
        <div
          *ngIf="
            staffForm.get('name')?.errors && staffForm.get('name')?.touched
          "
        >
          <p
            *ngIf="staffForm.get('name')?.getError('required')"
            class="mt-1 text-red-700"
          >
            Name is required
          </p>
          <p
            *ngIf="staffForm.get('name')?.getError('minlength')"
            class="mt-1 text-red-700"
          >
            Name must be more than 2 letters
          </p>
          <p
            *ngIf="staffForm.get('name')?.getError('maxlength')"
            class="mt-1 text-red-700"
          >
            Name must be less than 20 letters
          </p>
        </div>
      </div>

      <div class="lg:col-span-2 sm:col-span-4">
        <label
          for="email"
          class="block text-sm font-medium leading-6 text-gray-900"
          >Email
        </label>
        <div class="mt-2">
          <input
            id="email"
            name="email"
            type="email"
            autocomplete="email"
            formControlName="email"
            class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
          />
        </div>
        <div
          *ngIf="
            staffForm.get('email')?.errors && staffForm.get('email')?.touched
          "
        >
          <p
            *ngIf="staffForm.get('email')?.getError('required')"
            class="mt-1 text-red-700"
          >
            email is required
          </p>
          <p
            *ngIf="staffForm.get('email')?.getError('pattern')"
            class="mt-1 text-red-700"
          >
            invaild Email
          </p>
        </div>
      </div>

      <div class="lg:col-span-2 sm:col-span-4">
        <label
          for="phone"
          class="block text-sm font-medium leading-6 text-gray-900"
          >Phone</label
        >
        <div class="mt-2">
          <input
            id="phone"
            name="phone"
            type="text"
            autocomplete="phone"
            formControlName="phone"
            class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
          />
        </div>
        <div
          *ngIf="
            staffForm.get('phone')?.errors && staffForm.get('phone')?.touched
          "
        >
          <p
            *ngIf="staffForm.get('phone')?.getError('required')"
            class="mt-1 text-red-700"
          >
            phone is required
          </p>
          <p
            *ngIf="staffForm.get('phone')?.getError('pattern')"
            class="mt-1 text-red-700"
          >
            phone must be 11 numbers
          </p>
        </div>
      </div>
      <div class="lg:col-span-2 sm:col-span-4">
        <label
          for="age"
          class="block text-sm font-medium leading-6 text-gray-900"
          >Age</label
        >
        <div class="mt-2">
          <input
            id="age"
            name="age"
            type="number"
            autocomplete="age"
            formControlName="age"
            class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
          />
        </div>
        <div
          *ngIf="staffForm.get('age')?.errors && staffForm.get('age')?.touched"
        >
          <p
            *ngIf="staffForm.get('age')?.getError('required')"
            class="mt-1 text-red-700"
          >
            Age is required
          </p>
          <p
            *ngIf="staffForm.get('age')?.getError('min')"
            class="mt-1 text-red-700"
          >
            age must be more than 15 year
          </p>
          <p
            *ngIf="staffForm.get('age')?.getError('max')"
            class="mt-1 text-red-700"
          >
            age must be less than 60 year
          </p>
        </div>
      </div>

      <div class="lg:col-span-2 sm:col-span-4">
        <label
          for="jobTitle"
          class="block text-sm font-medium leading-6 text-gray-900"
          >Job Title</label
        >
        <div class="mt-2">
          <input
            type="text"
            name="jobTitle"
            id="jobTitle"
            autocomplete="jobTitle"
            formControlName="jobTitle"
            class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
          />
          <div
            *ngIf="
              staffForm.get('jobTitle')?.errors &&
              staffForm.get('jobTitle')?.touched
            "
          >
            <p
              *ngIf="staffForm.get('jobTitle')?.getError('required')"
              class="mt-1 text-red-700"
            >
              jobTitle is required
            </p>
            <p
              *ngIf="staffForm.get('jobTitle')?.getError('minlength')"
              class="mt-1 text-red-700"
            >
              jobTitle must be more than 2 letters
            </p>
            <p
              *ngIf="staffForm.get('jobTitle')?.getError('maxlength')"
              class="mt-1 text-red-700"
            >
              jobTitle must be less than 20 letters
            </p>
          </div>
        </div>
      </div>
      <div class="lg:col-span-2 sm:col-span-4">
        <label
          for="salary"
          class="block text-sm font-medium leading-6 text-gray-900"
          >Salary</label
        >
        <div class="mt-2">
          <input
            type="number"
            name="salary"
            id="salary"
            autocomplete="salary"
            formControlName="salary"
            class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
          />
        </div>
        <div
          *ngIf="
            staffForm.get('salary')?.errors && staffForm.get('salary')?.touched
          "
        >
          <p
            *ngIf="staffForm.get('salary')?.getError('required')"
            class="mt-1 text-red-700"
          >
            salary is required
          </p>
          <p
            *ngIf="staffForm.get('salary')?.getError('max')"
            class="mt-1 text-red-700"
          >
            salary must be less than 20000 EGP
          </p>
        </div>
      </div>
      <div class="lg:col-span-2 sm:col-span-4">
        <label
          for="gender"
          class="block text-sm font-medium leading-6 text-gray-900"
          >Gender</label
        >
        <div class="mt-2">
          <select
            id="gender"
            name="gender"
            autocomplete="gender"
            formControlName="gender"
            class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6"
          >
            <option value="male">Male</option>
            <option value="female">Female</option>
          </select>
        </div>
        <div
          *ngIf="
            staffForm.get('gender')?.errors && staffForm.get('gender')?.touched
          "
        >
          <p
            *ngIf="staffForm.get('gender')?.getError('required')"
            class="mt-1 text-red-700"
          >
            Gender is required
          </p>
        </div>
      </div>
    </div>
    <button
      [ngClass]="{ 'cursor-not-allowed': staffForm.invalid }"
      [disabled]="staffForm.invalid"
      type="submit"
      class="inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 my-4 d-block mx-auto submit-btn"
    >
      <i class="fa fa-spin fa-spinner" *ngIf="isLoading"></i>
      <i class="fa-solid fa-plus me-2" *ngIf="!isLoading"></i>
      <span *ngIf="!isLoading"> Add Staff </span>
    </button>
  </div>
</form>
